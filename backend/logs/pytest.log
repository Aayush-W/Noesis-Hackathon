DEBUG    datasets:config.py:54 PyTorch version 2.7.1+cu118 available.
DEBUG    chromadb.config:config.py:363 Starting component System
DEBUG    chromadb.config:config.py:363 Starting component Posthog
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.address`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.address` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.automotive`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.automotive` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.bank`.
DEBUG    faker.factory:factory.py:88 Specified locale `en_US` is not available for provider `faker.providers.bank`. Locale reset to `en_GB` for this provider.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.barcode`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.barcode` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.color`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.color` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.company`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.company` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.credit_card`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.credit_card` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.currency`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.currency` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.date_time`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.date_time` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:108 Provider `faker.providers.doi` does not feature localization. Specified locale `en_US` is not used for this provider.
DEBUG    faker.factory:factory.py:108 Provider `faker.providers.emoji` does not feature localization. Specified locale `en_US` is not used for this provider.
DEBUG    faker.factory:factory.py:108 Provider `faker.providers.file` does not feature localization. Specified locale `en_US` is not used for this provider.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.geo`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.geo` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.internet`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.internet` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.isbn`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.isbn` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.job`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.job` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.lorem`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.lorem` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.misc`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.misc` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.passport`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.passport` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.person`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.person` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.phone_number`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.phone_number` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:108 Provider `faker.providers.profile` does not feature localization. Specified locale `en_US` is not used for this provider.
DEBUG    faker.factory:factory.py:108 Provider `faker.providers.python` does not feature localization. Specified locale `en_US` is not used for this provider.
DEBUG    faker.factory:factory.py:108 Provider `faker.providers.sbn` does not feature localization. Specified locale `en_US` is not used for this provider.
DEBUG    faker.factory:factory.py:78 Looking for locale `en_US` in provider `faker.providers.ssn`.
DEBUG    faker.factory:factory.py:97 Provider `faker.providers.ssn` has been localized to `en_US`.
DEBUG    faker.factory:factory.py:108 Provider `faker.providers.user_agent` does not feature localization. Specified locale `en_US` is not used for this provider.
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 1249 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 3 chunks from biology_notes.pdf
WARNING  app.services.chunking_service:chunking_service.py:50 Text too short (5 chars) for biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 749 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 2 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 1249 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 3 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 1249 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 3 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 529 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 2 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:202 Merged small chunks: 1 -> 1
INFO     app.services.chunking_service:chunking_service.py:202 Merged small chunks: 2 -> 2
INFO     app.services.chunking_service:chunking_service.py:202 Merged small chunks: 3 -> 2
INFO     app.services.chunking_service:chunking_service.py:202 Merged small chunks: 3 -> 2
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 859 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 2 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 559 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 2 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 670 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 2 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 99999 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 223 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 699 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 2 chunks from biology_notes.pdf
INFO     app.services.chunking_service:chunking_service.py:53 Chunking biology_notes.pdf: 699 chars
INFO     app.services.chunking_service:chunking_service.py:70 Generated 2 chunks from biology_notes.pdf
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:57 Embedding 1 chunks in batches of 50
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:57 Embedding 1 chunks in batches of 50
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:57 Embedding 1 chunks in batches of 50
INFO     app.services.embedding_service:embedding_service.py:97 Successfully embedded 1 chunks
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:57 Embedding 25 chunks in batches of 10
INFO     app.services.embedding_service:embedding_service.py:97 Successfully embedded 25 chunks
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:57 Embedding 1 chunks in batches of 50
INFO     app.services.embedding_service:embedding_service.py:97 Successfully embedded 1 chunks
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:116 Embedding query: What is photosynthesis?...
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:116 Embedding query: What What What What What What What What What What ...
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
WARNING  app.services.embedding_service:embedding_service.py:156 Embedding attempt 1/3 failed for models/text-embedding-004: API Error
WARNING  app.services.embedding_service:embedding_service.py:156 Embedding attempt 2/3 failed for models/text-embedding-004: Rate limit
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
WARNING  app.services.embedding_service:embedding_service.py:156 Embedding attempt 1/3 failed for models/text-embedding-004: API Error
WARNING  app.services.embedding_service:embedding_service.py:156 Embedding attempt 2/3 failed for models/text-embedding-004: API Error
WARNING  app.services.embedding_service:embedding_service.py:156 Embedding attempt 3/3 failed for models/text-embedding-004: API Error
ERROR    app.services.embedding_service:embedding_service.py:172 Embedding failed after 3 retries for model models/text-embedding-004
WARNING  app.services.embedding_service:embedding_service.py:156 Embedding attempt 1/3 failed for models/gemini-embedding-001: API Error
WARNING  app.services.embedding_service:embedding_service.py:156 Embedding attempt 2/3 failed for models/gemini-embedding-001: API Error
WARNING  app.services.embedding_service:embedding_service.py:156 Embedding attempt 3/3 failed for models/gemini-embedding-001: API Error
ERROR    app.services.embedding_service:embedding_service.py:172 Embedding failed after 3 retries for model models/gemini-embedding-001
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:116 Embedding query: test question...
INFO     app.services.embedding_service:embedding_service.py:116 Embedding query: test question...
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.embedding_service:embedding_service.py:57 Embedding 3 chunks in batches of 50
WARNING  app.services.embedding_service:embedding_service.py:78 Embedding count mismatch (expected 3, got 1). Falling back to per-chunk embedding.
INFO     app.services.embedding_service:embedding_service.py:97 Successfully embedded 3 chunks
INFO     app.services.rag_service:rag_service.py:358 Extracted 1 citations from answer
INFO     app.services.rag_service:rag_service.py:358 Extracted 0 citations from answer
INFO     app.services.rag_service:rag_service.py:358 Extracted 1 citations from answer
INFO     app.services.rag_service:rag_service.py:358 Extracted 1 citations from answer
INFO     app.services.rag_service:rag_service.py:358 Extracted 1 citations from answer
INFO     app.services.rag_service:rag_service.py:299 Deduplicated chunks: 3 -> 2
INFO     app.services.rag_service:rag_service.py:299 Deduplicated chunks: 2 -> 1
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.rag_service:rag_service.py:441 Query for Biology: random question (keywords: ['random', 'question'])
INFO     app.services.rag_service:rag_service.py:445 Generated 1 queries for retrieval
DEBUG    app.services.rag_service:rag_service.py:465 Retrieved 0 results for query: random question
INFO     app.services.rag_service:rag_service.py:498 No results found for query in Biology
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.rag_service:rag_service.py:441 Query for Biology: test question (keywords: ['test', 'question'])
INFO     app.services.rag_service:rag_service.py:445 Generated 1 queries for retrieval
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
INFO     app.services.rag_service:rag_service.py:441 Query for Biology: What is photosynthesis? (keywords: ['photosynthesis'])
INFO     app.services.rag_service:rag_service.py:445 Generated 1 queries for retrieval
DEBUG    app.services.rag_service:rag_service.py:465 Retrieved 1 results for query: What is photosynthesis?
INFO     app.services.rag_service:rag_service.py:511 Confidence tier: HIGH (score: 1.0)
INFO     app.services.rag_service:rag_service.py:358 Extracted 1 citations from answer
INFO     app.services.rag_service:rag_service.py:576 Generated answer with 1 citations
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
DEBUG    asyncio:proactor_events.py:633 Using proactor: IocpProactor
